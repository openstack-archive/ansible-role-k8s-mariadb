---
- name: Enable/Install epel-release
  become: true
  yum:
    name: "{{item}}"
    state: present
  with_items:
    - epel-release

- name: Enable/Install delorean
  become: true
  get_url:
    url: "{{item.url}}"
    dest: "/etc/yum.repos.d/{{item.dest}}"
  with_items:
    - dest: delorean-deps.repo
      url: "https://trunk.rdoproject.org/centos7-master/delorean-deps.repo"
    - dest: delorean.repo
      url: "https://trunk.rdoproject.org/centos7-master/current-tripleo-rdo/delorean.repo"

- name: Upgrade all packages
  become: true
  yum:
    name: '*'
    state: latest

- name: Install required packages
  become: true
  yum:
    name: "{{item}}"
    state: latest
  with_items:
    - openstack-tempest
